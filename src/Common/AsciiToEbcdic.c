/*********************************************************************
 *
 * File:        AsciiToEbcdic.c
 * Project:	Common
 * Desc:
 *
 *  Convert an ASCII string to EBCDIC.
 *
 * Notes:
 *
 *  The conversion table was stolen from GNU's dd program.
 *
 * Author:	Paul Houghton 719-527-7834 - (paul.houghton@wcom.com)
 * Created:	03/03/00 06:44
 *
 * Revision History: (See end of file for Revision Log)
 *
 *  Last Mod By:    $Author$
 *  Last Mod:	    $Date$
 *  Version:	    $Revision$
 *
 *********************************************************************/

#include "_Common.h"

COMMON_VERSION(
  AsciiToEbcdic,
  "$Id$" );

unsigned char const AtoE[] =
{
     0,   01,   02,   03,  067,  055,  056,  057,
   026,   05,  045,  013,  014,  015,  016,  017,
   020,  021,  022,  023,  074,  075,  062,  046,
   030,  031,  077,  047,  034,  035,  036,  037,
  0100, 0117, 0177, 0173, 0133, 0154, 0120, 0175,
  0115, 0135, 0134, 0116, 0153, 0140, 0113, 0141,
  0360, 0361, 0362, 0363, 0364, 0365, 0366, 0367,
  0370, 0371, 0172, 0136, 0114, 0176, 0156, 0157,
  0174, 0301, 0302, 0303, 0304, 0305, 0306, 0307,
  0310, 0311, 0321, 0322, 0323, 0324, 0325, 0326,
  0327, 0330, 0331, 0342, 0343, 0344, 0345, 0346,
  0347, 0350, 0351, 0112, 0340, 0132, 0137, 0155,
  0171, 0201, 0202, 0203, 0204, 0205, 0206, 0207,
  0210, 0211, 0221, 0222, 0223, 0224, 0225, 0226,
  0227, 0230, 0231, 0242, 0243, 0244, 0245, 0246,
  0247, 0250, 0251, 0300, 0152, 0320, 0241,   07,
   040,  041,  042,  043,  044,  025,   06,  027,
   050,  051,  052,  053,  054,  011,  012,  033,
   060,  061,  032,  063,  064,  065,  066,  010,
   070,  071,  072,  073,   04,  024,  076, 0341,
  0101, 0102, 0103, 0104, 0105, 0106, 0107, 0110,
  0111, 0121, 0122, 0123, 0124, 0125, 0126, 0127,
  0130, 0131, 0142, 0143, 0144, 0145, 0146, 0147,
  0150, 0151, 0160, 0161, 0162, 0163, 0164, 0165,
  0166, 0167, 0170, 0200, 0212, 0213, 0214, 0215,
  0216, 0217, 0220, 0232, 0233, 0234, 0235, 0236,
  0237, 0240, 0252, 0253, 0254, 0255, 0256, 0257,
  0260, 0261, 0262, 0263, 0264, 0265, 0266, 0267,
  0270, 0271, 0272, 0273, 0274, 0275, 0276, 0277,
  0312, 0313, 0314, 0315, 0316, 0317, 0332, 0333,
  0334, 0335, 0336, 0337, 0352, 0353, 0354, 0355,
  0356, 0357, 0372, 0373, 0374, 0375, 0376, 0377
};

void
AsciiToEbcdic( unsigned char * buf, int len )
{
  int	i;
  int	end;

  if( len == 0 )
    {
      end = strlen( (char *)buf );
    }
  else
    {
      end = len;
    }

  for( i = 0; i < end; i++, buf++ )
    {
      *buf = AtoE[*buf];
    }
}

/*
 *
 * Revision Log:
 *
 * $Log$
 *
 */
